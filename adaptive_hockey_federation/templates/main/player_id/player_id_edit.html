{% extends 'base/base.html' %}
{% load static %}
{% load user_filters %}
{% block title %}
  Редактирование профиля игрока
{% endblock %}

{% block content %}
<h2 class="text-center mb-4">Редактирование профиля игрока</h2>
<div class="profile-col">
  <form style="width: 100%;" method="post" action="{% url 'main:player_id_edit' player.id %}">
    {% csrf_token %}
    <div class="container text-start">
        <h4 class="text-center mb-4">Личная информация</h4>
        <table class="table-table">
          <tbody>
            {% for field in form.visible_fields %}
              {% if field.name in 'surname name patronymic birthday identity_document'%}
                <tr>
                  <th>{{ field.label_tag }}</th>
                    <td>
                      {% if field.errors %}
                        {{ field |addclass:'base-input-errors'}}
                        {{ field.errors }}
                      {% else %}
                        {{ field |addclass:'base-input'}}
                      {% endif %}
                    </td>
                <tr>
              {% elif  field.name in 'gender discipline diagnosis' %}
                <tr>
                  <th>{{ field.label_tag }}</th>
                      <td>
                        {% if field.errors %}
                          {{ field |addclass:'base-select-errors'}}
                          {{ field.errors|striptags}}
                        {% else %}
                          {{ field |addclass:'base-select'}}
                        {% endif %}
                      </td>
                </tr>
                  {% endif %}
            {% endfor %}
          </tbody>
        </table>

        <h4 class="text-center mb-4">Игровая информация</h4>
        <table class="table-table">
            {% for field in form.visible_fields %}
              {% if field.name in 'level_revision number'%}
                <tr>
                  <th>{{ field.label_tag }}</th>
                    <td>
                      {% if field.errors %}
                        {{ field |addclass:'base-input-errors'}}
                        {{ field.errors }}
                      {% else %}
                        {{ field |addclass:'base-input'}}
                      {% endif %}
                    </td>
                <tr>
                  {% elif  field.name in "team" %}
                  <tr>
                    <th>{{ field.label_tag }}</th>
                        <td>
                          {% if field.errors %}
                            {{ field |addclass:"base-select-errors"}}
                            {{ field.errors|striptags}}
                          {% else %}
                          <div class="container">
                            <div class="selectors-teams">
                              <div class="selector-left">
                                <h2> Доступные команды 
                                  <span class="help-icon" title="Список доступных команд, действующие команды обозначены серым цветом, чтобы выбрать\удалить зажмите ctrl"></span>
                                </h2>
                                {{ field |addclass:"base-select-teams"}}
                              </div>
                              <ul class="selectors-chooser">
                                <li>
                                  <a title="Выбрать" href="#" id="id_users_add_link" class="selector-add active">Выбрать</a>
                                </li>
                                <li>
                                  <a title="Удалить" href="#" id="id_users_remove_link" class="selector-remove active">Удалить</a>
                                </li>
                              </ul>
                            <div class="selector-right">
                              <h2> Выбранные команды 
                                <span class="help-icon" title="Пока в разработке, поле не функционирует"></span>
                              </h2>
                              {{ form.player_teams |addclass:"base-select-teams"}}
                            </div>
                            </div>
                          </div>
                          {% endif %}
                        </td>
                  </tr>
              {% elif  field.name in 'position' %}
                <tr>
                  <th>{{ field.label_tag }}</th>
                      <td>
                        {% if field.errors %}
                          {{ field |addclass:'base-select-errors'}}
                          {{ field.errors|striptags}}
                        {% else %}
                          {{ field |addclass:'base-select'}}
                        {% endif %}
                      </td>
                </tr>
              {% elif  field.name in 'is_captain is_assistent' %}
                <tr>
                  <th>{{ field.label_tag }}</th>
                    <td>
                      {{ field |addclass:'base-checkbox'}}
                    </td>
                </tr>
              {% endif %}
            {% endfor %}
          </tbody>
        </table>
      <h4 class="text-center mb-4">Документы</h4>
      <table class="table-table">
        {% if player_documents %}
          <table class="table-table">
            <thead>
              <tr>
                <th>Название</th>
                <th>Файл</th>
              </tr>
            </thead>
            <tbody>
              {% for doc in player_documents %}
                <tr>
                  <td>{{ doc.name }}</td>
                  <td><a class='documents-link-player' href="{{ doc.file.url }}" target="_blank">Просмотреть</a></td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        {% else %}
          <p class="text-center">Документы отсутствуют</p>
        {% endif %}
      </table>
    </div>
    <!-- Save Button -->
    <div class="container">
      <div class="row">
        <div class="col text-center text-white flex justify-start">
          <button
            type="submit"
            class="btn btn-secondary text-white"
            style="background-color: #64C2D1; border: 1px solid #fff;"
          >
            Сохранить
          </button>
        </div>
      </div>
    </div>
  </form>
</div>
{% endblock %}
